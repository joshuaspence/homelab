---
apiVersion: 'helm.fluxcd.io/v1'
kind: 'HelmRelease'
metadata:
  name: 'flux'
  namespace: 'flux'
  annotations:
    fluxcd.io/automated: 'true'
    repository.fluxcd.io/memcached: 'memcached.repository'
    tag.fluxcd.io/memcached: 'memcached.tag'
    filter.fluxcd.io/chart-image: 'semver:*'
    filter.fluxcd.io/memcached: 'semver:*'
spec:
  chart:
    repository: 'https://charts.fluxcd.io'
    name: 'flux'
    version: '1.4.0'
  releaseName: 'flux'
  values:
    image:
      repository: 'docker.io/fluxcd/flux'
      tag: '1.20.0'
    git:
      url: 'git@github.com:joshuaspence/homelab.git'
      branch: 'master'
      path: 'src'
      secretName: 'flux-git'
    gpgKeys:
      secretName: 'flux-gpg'
    sops:
      enabled: true
    memcached:
      repository: 'memcached'
      tag: '1.6.6'
    prometheus:
      enabled: true
      serviceMonitor:
        create: true
    syncGarbageCollection:
      enabled: true
    dashboards:
      enabled: true
